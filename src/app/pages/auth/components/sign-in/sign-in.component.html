<p-dialog [modal]="true" [(visible)]="showLogin" [style]="{ width: '450px' }" styleClass="p-fluid"
  (onHide)="hideLogin()" [closeOnEscape]="true">
  <ng-template pTemplate="content">
    @if(!forgotPassword && !CodeSent){
    <div class="center">
      <h1>Se Connecter</h1>
      @if(logFail && submit){
      <div class="p-error">Password or username incorrect</div>
      }
    </div>

    <form [formGroup]="authForm" (ngSubmit)="onSubmit()">
      <div class="field">
        <label for="Email">Email</label>
        <input id="Email" type="text" pInputText formControlName="Email" />
      </div>

      <div class="field position-relative">
        <label for="Password">Password</label>
        <p-password [toggleMask]="true" [feedback]="false" inputId="Password" autocomplete="password"
          formControlName="Password" />
        <a class="forgot-password-link" (click)="onForgotPassword()" tabindex="0">
          mot de passe oublié ?
        </a>
      </div>
      <div>
        <label class="d-flex align-items-center" for="RememberMe">
          <p-checkbox formControlName="RememberMe" inputId="RememberMe" [binary]="true" class="mr-1"></p-checkbox>
          <span>
            Rester connecté
          </span>
        </label>
      </div>
      <div class="field">
        <button label="Login" pButton size="small" type="Submit" class="button-new"
          [disabled]="authForm.invalid"></button>
      </div>
    </form>
    }
    @if(forgotPassword){
    <div class="center">
      <h1>Mot de passe oublié</h1>
       @if(error){
      <div class="p-error">Address email incorrect</div>
      }
    </div>
    <form [formGroup]="emailForm" (ngSubmit)="SubmitForgotPassword()">
      <div class="field">
        <label for="Email">Email</label>
        <input id="Email" type="text" pInputText formControlName="Email" />
      </div>
      <div class="field">
        <button label="Envoyer" pButton size="small" type="Submit" class="button-new" [disabled]="emailForm.invalid"></button>
      </div>
    </form>
    }
    @if(CodeSent){
    <div class="center">
      <h1>Code envoyé</h1>
      <p>Un lien de réinitialisation a été envoyé à votre adresse e-mail.</p>
      <button label="Fermer" pButton size="small" class="button-new" (click)="showLogin = false"></button>
    </div>
    }
  </ng-template>
</p-dialog>